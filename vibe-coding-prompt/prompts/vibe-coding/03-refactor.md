# VIBE：重构（Refactor）
> 目标：不改变外部行为，提升可读性/可维护性/可测试性。

## 输入变量
- 重构目标：{{refactor_goal}}
- 约束：{{constraints}}
- 相关模块/文件：{{related_paths}}
- 不可改动范围：{{do_not_touch}}

## 工作流程
1. **行为锁定**
   - 列出现有行为（包括边界行为），必要时先补测试“锁死行为”。
2. **重构计划**
   - 拆分为小步提交：每一步可编译、可运行、可回滚。
3. **执行**
   - 小步替换、提取函数/模块、去重复、明确边界与依赖方向。
4. **验证**
   - 测试全绿；必要时做简单基准/日志对比。
5. **收尾**
   - 清理 TODO、死代码、注释与命名一致性。

## 输出格式
- 🎯 重构目标：一句话
- 🧱 拆分步骤：列出 2–6 个小步
- 🧩 关键改动：要点说明
- ✅ 行为保持证明：哪些测试/对比说明未改变行为
