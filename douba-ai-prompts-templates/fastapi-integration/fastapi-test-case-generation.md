# 场景：FastAPI接口测试用例生成（含Ollama集成接口）

## 核心用途

生成覆盖功能、参数校验、异常处理、性能的完整测试用例，适配自动化测试需求。

---

## 提示词模板

### 接口信息

- **接口文档/路由定义**：[粘贴接口定义或文档]
  - 示例：`@app.post('/api/ollama/generate')`，参数：`prompt(str)`、`temperature(float, optional)`

- **接口功能**：[描述接口作用]
  - 示例：Ollama模型文本生成、用户数据查询、文件上传解析

- **响应格式**：[说明返回结构]
  - 示例：JSON格式，字段：`code(int)`、`msg(str)`、`data(dict)`
  - 示例：流式SSE响应

- **常见异常**：[列出可能的错误场景]
  - 示例：参数缺失、参数类型错误、权限不足、服务不可用

### 测试需求

- **测试类型**：[选择测试范围]
  - 功能测试 / 性能测试 / 接口兼容性测试

- **测试工具**：[指定测试框架]
  - 示例：pytest、Postman、Locust、httpx

- **覆盖要求**：[说明覆盖范围]
  - 示例：覆盖所有必填参数、可选参数、异常场景
  - 性能测试并发数≥50

- **额外约束**：[其他限制]
  - 示例：测试环境为本地开发环境、避免修改生产数据、测试后清理测试残留

### 期望输出要求

1. **测试用例清单**（含用例ID、测试场景、输入参数、预期输出、测试优先级）
2. **自动化测试代码**（如pytest代码，含测试函数、参数化、断言逻辑）
3. **手动测试步骤**（如Postman测试步骤，含请求配置、参数填写、结果验证）
4. **性能测试方案**（含测试指标、并发设置、测试时长、结果判断标准）
5. **测试注意事项**（如依赖环境、前置条件、异常处理）

### 输出格式约束

- 测试用例用表格呈现
- 自动化代码用对应语言代码块标记
- 手动测试步骤用有序列表
- 性能测试方案分点清晰

---

## 使用示例

```
我需要为FastAPI接口生成完整的测试用例。

【接口信息】
- 接口文档/路由定义：
```python
@app.post("/api/generate")
async def generate(
    prompt: str,
    temperature: float = 0.7,
    max_tokens: int = 1000
) -> GenerateResponse:
    """Ollama文本生成接口"""
    ...
```
- 接口功能：调用Ollama模型生成文本
- 响应格式：{"code": 0, "msg": "success", "data": {"text": "...", "elapsed_ms": 1234}}
- 常见异常：prompt为空、temperature超出范围[0,2]、Ollama服务不可用

【测试需求】
- 测试类型：功能测试 + 性能测试
- 测试工具：pytest（功能）、Locust（性能）
- 覆盖要求：覆盖正常流程、边界值、异常场景，性能测试并发50
- 额外约束：测试环境为本地Docker部署

请生成完整的测试用例清单和自动化测试代码。
```
